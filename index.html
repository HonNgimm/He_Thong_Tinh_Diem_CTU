<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>H·ªá th·ªëng T√≠nh ƒëi·ªÉm T·ªï H·ª£p CTU</title>
  <link rel="shortcut icon" href="./icon.png" type="image/x-icon">
  <style>
    body {
      font-family: 'Times New Roman', Times, serif;
      padding: 30px;
      margin: 0;
      background: url("nen-ctu.jpg") no-repeat center center fixed;
      background-size: cover;
    }

    .popup {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      background: rgba(0, 90, 180, 0.2);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 1000;
    }

    .popup-content {
      background: #e6f2ff;
      border-radius: 20px;
      padding: 30px;
      position: relative;
      display: flex;
      align-items: center;
      gap: 20px;
      box-shadow: 0 0 20px rgba(0, 0, 0, 0.2);
      max-width: 600px;
    }

    .popup img {
      width: 110px;
    }

    .popup h3 {
      margin-top: 0;
      color: #004080;
      font-size: 26px;
    }

    .popup a {
      display: block;
      margin: 8px 0;
      text-decoration: none;
      color: #0066cc;
      font-weight: bold;
      font-size: 21px;
    }

    .popup a:hover {
      text-decoration: underline;
    }

    .close-btn {
      position: absolute;
      top: 10px;
      right: 15px;
      font-size: 22px;
      color: red;
      cursor: pointer;
    }

    .box {
      position: relative;
      background: rgba(255, 255, 255, 0.9);
      padding: 25px;
      max-width: 520px;
      margin: auto;
      border-radius: 15px;
      box-shadow: 0 0 15px rgba(0,0,0,0.2);
    }

    h2 {
      color: #0066cc;
      text-align: center;
    }

    label, input, select, button {
      display: block;
      margin-top: 12px;
      width: 100%;
      font-size: 16px;
    }

    input, select {
      padding: 8px;
      border-radius: 5px;
      border: 1px solid #ccc;
    }

    button {
      padding: 10px;
      margin-top: 20px;
      background: #0066cc;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      font-weight: bold;
    }

    button:hover {
      background: #004e99;
    }

    .result {
      margin-top: 20px;
      font-size: 18px;
      font-weight: bold;
    }

    ul {
      padding-left: 20px;
    }
  </style>
</head>
<body>
<div class="popup" id="popup">
  <div class="popup-content">
    <img src="icon.png" alt="capy">
    <div>
      <h3>T·ªîNG H·ª¢P TH√îNG TIN TUY·ªÇN SINH</h3>
      <a href="https://zalo.me/g/wfdfve239" target="_blank">Tham Gia Group Zalo T∆∞ V·∫•n Tuy·ªÉn Sinh</a>
      <a href="https://docs.google.com/spreadsheets/d/1ycWJZnvW822vo_qjQ1gJDPAjqWKDVsweNUKNYCYBaQM/edit?gid=212231679#gid=212231679" target="_blank">Xem th√¥ng tin t·ªïng h·ª£p Q&A Tuy·ªÉn Sinh CTU</a>
      <a href="https://www.facebook.com/groups/vsat.practice/posts/1679600792751492/" target="_blank">T·∫∑ng tr·ªçn b·ªô T√†i Li·ªáu V-SAT</a>
    </div>
    <div class="close-btn" onclick="document.getElementById('popup').style.display='none'">&#10006;</div>
  </div>
</div>

<div class="box">
  <h2>H·ªÜ TH·ªêNG T√çNH ƒêI·ªÇM T·ªî H·ª¢P V-SAT</h2>
  <label>ƒêi·ªÉm V-SAT m√¥n 1 (thang 150):</label>
  <input type="number" id="mon1" min="0" max="150" step="0.1">
  <label>ƒêi·ªÉm V-SAT m√¥n 2:</label>
  <input type="number" id="mon2" min="0" max="150" step="0.1">
  <label>ƒêi·ªÉm V-SAT m√¥n 3:</label>
  <input type="number" id="mon3" min="0" max="150" step="0.1">
  <label>M√£ khu v·ª±c (∆∞u ti√™n):</label>
  <select id="khuvuc">
    <option value="KV1">KV1</option>
    <option value="KV2-NT">KV2-NT</option>
    <option value="KV2">KV2</option>
    <option value="KV3">KV3</option>
  </select>
  <button onclick="tinhDiem()">T√≠nh t·ªïng ƒëi·ªÉm</button>
  <div class="result" id="output"></div>
  <h2>H·ªÜ TH·ªêNG T√çNH ƒêI·ªÇM T·ªî H·ª¢P H·ªåC B·∫†</h2>
  <label>ƒêi·ªÉm h·ªçc b·∫° m√¥n 1 (thang 10):</label>
  <input type="number" id="hb1" min="0" max="10" step="0.01">
  <label>ƒêi·ªÉm h·ªçc b·∫° m√¥n 2:</label>
  <input type="number" id="hb2" min="0" max="10" step="0.01">
  <label>ƒêi·ªÉm h·ªçc b·∫° m√¥n 3:</label>
  <input type="number" id="hb3" min="0" max="10" step="0.01">
  <label>M√£ khu v·ª±c (∆∞u ti√™n):</label>
  <select id="khuvucHB">
    <option value="KV1">KV1</option>
    <option value="KV2-NT">KV2-NT</option>
    <option value="KV2">KV2</option>
    <option value="KV3">KV3</option>
  </select>
  <button onclick="tinhDiemHB()">T√≠nh ƒëi·ªÉm h·ªçc b·∫°</button>
  <div class="result" id="outputHB"></div>
</div>

<script>
    const quyTacdemo = [
      { a: 130, b: 150, c: 9.5, d: 10.0 },
      { a: 115, b: 130, c: 9.0, d: 9.5 },
      { a: 100, b: 115, c: 8.0, d: 9.0 },
      { a: 85,  b: 100, c: 7.0, d: 8.0 },
      { a: 70,  b: 85,  c: 6.0, d: 7.0 },
      { a: 55,  b: 70,  c: 5.0, d: 6.0 },
      { a: 0,   b: 55,  c: 0.0, d: 5.0 }
    ];

    const quyTacVsat = [
  { a: 137.0, b: 150.0, c: 9.0, d: 10.0 },     // Top 1%
  { a: 127.5, b: 137.0, c: 8.8, d: 9.0 },      // Top 5%
  { a: 121.0, b: 127.5, c: 8.6, d: 8.8 },      // Top 10%
  { a: 112.5, b: 121.0, c: 8.4, d: 8.6 },      // Top 20%
  { a: 106.0, b: 112.5, c: 8.2, d: 8.4 },      // Top 30%
  { a: 99.5,  b: 106.0, c: 8.0, d: 8.2 },      // Top 40%
  { a: 94.0,  b: 99.5,  c: 7.8, d: 8.0 },      // Top 50%
  { a: 88.0,  b: 94.0,  c: 7.6, d: 7.8 },      // Top 60%
  { a: 81.5,  b: 88.0,  c: 7.4, d: 7.6 },      // Top 70%
  { a: 74.0,  b: 81.5,  c: 7.0, d: 7.4 },      // Top 80%
  { a: 64.0,  b: 74.0,  c: 6.4, d: 7.0 }       // Tr√™n 80%
];


    const quyTacHB = [
    { a: 9.37, b: 10.00, c: 8.60, d: 9.80 },   // Top 5%
  { a: 9.10, b: 9.37, c: 8.40, d: 8.60 },    // Top 10%
  { a: 8.73, b: 9.10, c: 8.00, d: 8.40 },    // Top 20%
  { a: 8.40, b: 8.73, c: 7.80, d: 8.00 },    // Top 30%
  { a: 8.10, b: 8.40, c: 7.60, d: 7.80 },    // Top 40%
  { a: 7.77, b: 8.10, c: 7.20, d: 7.60 },    // Top 50%
  { a: 7.43, b: 7.77, c: 7.00, d: 7.20 },    // Top 60%
  { a: 7.07, b: 7.43, c: 6.60, d: 7.00 },    // Top 70%
  { a: 6.63, b: 7.07, c: 6.20, d: 6.60 },    // Top 80%
  { a: 6.07, b: 6.63, c: 5.40, d: 6.20 },    // Top 90%
  { a: 1.99, b: 6.07, c: 1.00, d: 5.40 }     // Tr√™n 90%
    ];

    const uuTienKhuVuc = {
      "KV1": 0.75,
      "KV2-NT": 0.5,
      "KV2": 0.25,
      "KV3": 0.0
    };

    function noiSuy(x, bang) {
      for (let i = 0; i < bang.length; i++) {
        let { a, b, c, d } = bang[i];
        if (x >= a && x <= b) {
          return c + ((x - a) * (d - c)) / (b - a);
        }
      }
      return 0;
    }

    function tinhUuTien(goc, diemTruoc) {
      if (diemTruoc >= 30) return 0;
      if (diemTruoc <= 22.5) return goc;
      return goc * (1 - (diemTruoc - 22.5) / 7.5);
    }

    function tinhDiem() {
      const mon1 = parseFloat(document.getElementById("mon1").value);
      const mon2 = parseFloat(document.getElementById("mon2").value);
      const mon3 = parseFloat(document.getElementById("mon3").value);
      const khuVuc = document.getElementById("khuvuc").value;
      const output = document.getElementById("output");

      if ([mon1, mon2, mon3].some(d => isNaN(d) || d < 0 || d > 150)) {
        output.innerText = "‚ö†Ô∏è Vui l√≤ng nh·∫≠p ƒë√∫ng 3 ƒëi·ªÉm V-SAT (0‚Äì150).";
        return;
      }

      const diemQD1 = noiSuy(mon1, quyTac2);
      const diemQD2 = noiSuy(mon2, quyTac2);
      const diemQD3 = noiSuy(mon3, quyTac2);

      const diemTruocUuTien = diemQD1 + diemQD2 + diemQD3;
      const diemUuTien = tinhUuTien(uuTienKhuVuc[khuVuc], diemTruocUuTien);
      const tong = diemTruocUuTien + diemUuTien;

      output.innerHTML = `
        ‚úÖ <b>ƒêi·ªÉm quy ƒë·ªïi:</b>
        <ul>
          <li>V-SAT M√¥n 1: ${diemQD1.toFixed(2)}</li>
          <li>V-SAT M√¥n 2: ${diemQD2.toFixed(2)}</li>
          <li>V-SAT M√¥n 3: ${diemQD3.toFixed(2)}</li>
        </ul>

        üéØ ƒêi·ªÉm ∆Øu Ti√™n: <strong>${diemUuTien.toFixed(2)}</strong><br>
        üî¢ <strong>T·ªïng ƒëi·ªÉm x√©t tuy·ªÉn: ${tong.toFixed(2)}</strong><br><br>
            K·∫øt qu·∫£ ch·ªâ mang t√≠nh ch·∫•t Tham Th·∫£o!</strong><br>
           C√≥ th·ªÉ sai l·ªách so v·ªõi K·∫øt qu·∫£ Ch√≠nh Th·ª©c!</strong>
      `;
    }
  
    function tinhDiemHB() {
  const hb1 = parseFloat(document.getElementById("hb1").value);
  const hb2 = parseFloat(document.getElementById("hb2").value);
  const hb3 = parseFloat(document.getElementById("hb3").value);
  const khuVuc = document.getElementById("khuvucHB").value;
  const output = document.getElementById("outputHB");

  const diemHB1 = noiSuy(hb1, quyTacHB);
  const diemHB2 = noiSuy(hb2, quyTacHB);
  const diemHB3 = noiSuy(hb3, quyTacHB);

  if ([hb1, hb2, hb3].some(d => isNaN(d) || d < 0 || d > 10)) {
    output.innerText = "‚ö†Ô∏è Vui l√≤ng nh·∫≠p ƒë√∫ng 3 ƒëi·ªÉm h·ªçc b·∫° (0‚Äì10).";
    return;
  }

  const diemTruocUuTien = diemHB1 + diemHB2 + diemHB3;
  const diemUuTien = tinhUuTien(uuTienKhuVuc[khuVuc], diemTruocUuTien);
  const tong = diemTruocUuTien + diemUuTien;
  const diemTrungBinh = tong / 3;

  const muc = quyTacHB.find(rule => diemTrungBinh > rule.a && diemTrungBinh <= rule.b);

  let quyDoiText = muc 
    ? `üëâ T∆∞∆°ng ƒë∆∞∆°ng ƒëi·ªÉm TN THPT t·ª´ <b>${muc.c.toFixed(2)}</b> ƒë·∫øn <b>${muc.d.toFixed(2)}</b>` 
    : "‚ö†Ô∏è Kh√¥ng t√¨m th·∫•y m·ª©c quy ƒë·ªïi ph√π h·ª£p.";

      output.innerHTML = `
        ‚úÖ <b>ƒêi·ªÉm t·ª´ng m√¥n:</b>
        <ul>
          <li>M√¥n 1: ${diemHB1.toFixed(2)}</li>
          <li>M√¥n 2: ${diemHB2.toFixed(2)}</li>
          <li>M√¥n 3: ${diemHB3.toFixed(2)}</li>
        </ul>

        üéØ ƒêi·ªÉm ∆Øu Ti√™n: <strong>${diemUuTien.toFixed(2)}</strong><br>
        üî¢ <strong>T·ªïng ƒëi·ªÉm x√©t tuy·ªÉn h·ªçc b·∫°: ${tong.toFixed(2)}</strong><br><br>
            K·∫øt qu·∫£ ch·ªâ mang t√≠nh ch·∫•t Tham Th·∫£o!<br>
            C√≥ th·ªÉ sai l·ªách so v·ªõi K·∫øt qu·∫£ Ch√≠nh Th·ª©c!
      `;
    }

</script>
</body>
</html>
